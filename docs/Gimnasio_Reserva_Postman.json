{
    "info": {
        "_postman_id": "gimnasio-reserva-v2",
        "name": "üèãÔ∏è Gimnasio Reserva - Colecci√≥n Secuencial v2",
        "description": "Colecci√≥n dise√±ada para ejecutarse con el Runner de Postman SIN errores de token.\n\nCada request de Login guarda autom√°ticamente el token.\nTodos los requests posteriores lo reutilizan.\n\nORDEN: Ejecutar de arriba hacia abajo.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
        {
            "key": "baseUrl",
            "value": "https://sistema-gestion-de-gimansio.onrender.com/api"
        },
        {
            "key": "adminToken",
            "value": ""
        },
        {
            "key": "userToken",
            "value": ""
        },
        {
            "key": "adminId",
            "value": ""
        },
        {
            "key": "userId",
            "value": ""
        },
        {
            "key": "entrenador1Id",
            "value": ""
        },
        {
            "key": "entrenador2Id",
            "value": ""
        },
        {
            "key": "entrenador3Id",
            "value": ""
        },
        {
            "key": "clase1Id",
            "value": ""
        },
        {
            "key": "clase2Id",
            "value": ""
        },
        {
            "key": "clase3Id",
            "value": ""
        },
        {
            "key": "clase4Id",
            "value": ""
        },
        {
            "key": "clase5Id",
            "value": ""
        },
        {
            "key": "reserva1Id",
            "value": ""
        },
        {
            "key": "reserva2Id",
            "value": ""
        },
        {
            "key": "reserva3Id",
            "value": ""
        }
    ],
    "item": [
        {
            "name": "PASO 1 - Registrar Admin",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Admin registrado con √©xito', function () {",
                            "    var code = pm.response.code;",
                            "    pm.expect(code === 201 || code === 200 || code === 400).to.be.true;",
                            "    if (code === 400) { console.log('Admin ya existe, continuando...'); }",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"nombre\": \"Admin Principal\",\n    \"correo\": \"admin@gimnasio.com\",\n    \"contrasena\": \"admin123\",\n    \"rol\": \"ADMIN\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/auth/register",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "auth",
                        "register"
                    ]
                }
            }
        },
        {
            "name": "PASO 2 - Login Admin ‚ö° GUARDA TOKEN",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Login admin exitoso', function () {",
                            "    pm.response.to.have.status(200);",
                            "    var json = pm.response.json();",
                            "    var data = json.data || json;",
                            "    pm.expect(data.accessToken).to.be.a('string');",
                            "    pm.collectionVariables.set('adminToken', data.accessToken);",
                            "    pm.collectionVariables.set('adminId', data.idUsuario);",
                            "    console.log('‚úÖ Admin token guardado. ID: ' + data.idUsuario);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"correo\": \"admin@gimnasio.com\",\n    \"contrasena\": \"admin123\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/auth/login",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "auth",
                        "login"
                    ]
                }
            }
        },
        {
            "name": "PASO 3 - Registrar Usuario Normal",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Usuario registrado', function () {",
                            "    var code = pm.response.code;",
                            "    pm.expect(code === 201 || code === 200 || code === 400).to.be.true;",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"nombre\": \"Carlos P√©rez\",\n    \"correo\": \"carlos@gmail.com\",\n    \"contrasena\": \"123456\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/auth/register",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "auth",
                        "register"
                    ]
                }
            }
        },
        {
            "name": "PASO 4 - Login Usuario ‚ö° GUARDA TOKEN",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Login usuario exitoso', function () {",
                            "    pm.response.to.have.status(200);",
                            "    var json = pm.response.json();",
                            "    var data = json.data || json;",
                            "    pm.expect(data.accessToken).to.be.a('string');",
                            "    pm.collectionVariables.set('userToken', data.accessToken);",
                            "    pm.collectionVariables.set('userId', data.idUsuario);",
                            "    console.log('‚úÖ User token guardado. ID: ' + data.idUsuario);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"correo\": \"carlos@gmail.com\",\n    \"contrasena\": \"123456\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/auth/login",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "auth",
                        "login"
                    ]
                }
            }
        },
        {
            "name": "PASO 5 - Crear Entrenador 1 (Yoga)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Entrenador 1 creado', function () {",
                            "    pm.response.to.have.status(201);",
                            "    var json = pm.response.json();",
                            "    pm.collectionVariables.set('entrenador1Id', json.idEntrenador);",
                            "    console.log('‚úÖ Entrenador 1 ID: ' + json.idEntrenador);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"nombre\": \"Mar√≠a Garc√≠a\",\n    \"especialidad\": \"Yoga\",\n    \"certificaciones\": \"Yoga Alliance RYT-200, Pilates Mat Certified\",\n    \"activo\": true\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/admin/entrenadores",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "entrenadores"
                    ]
                }
            }
        },
        {
            "name": "PASO 6 - Crear Entrenador 2 (CrossFit)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Entrenador 2 creado', function () {",
                            "    pm.response.to.have.status(201);",
                            "    var json = pm.response.json();",
                            "    pm.collectionVariables.set('entrenador2Id', json.idEntrenador);",
                            "    console.log('‚úÖ Entrenador 2 ID: ' + json.idEntrenador);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"nombre\": \"Juan Mart√≠nez\",\n    \"especialidad\": \"CrossFit\",\n    \"certificaciones\": \"CrossFit Level 2, NSCA-CSCS\",\n    \"activo\": true\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/admin/entrenadores",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "entrenadores"
                    ]
                }
            }
        },
        {
            "name": "PASO 7 - Crear Entrenador 3 (Spinning)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Entrenador 3 creado', function () {",
                            "    pm.response.to.have.status(201);",
                            "    var json = pm.response.json();",
                            "    pm.collectionVariables.set('entrenador3Id', json.idEntrenador);",
                            "    console.log('‚úÖ Entrenador 3 ID: ' + json.idEntrenador);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"nombre\": \"Laura Rodr√≠guez\",\n    \"especialidad\": \"Spinning\",\n    \"certificaciones\": \"Spinning Certified Instructor, ACE Group Fitness\",\n    \"activo\": true\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/admin/entrenadores",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "entrenadores"
                    ]
                }
            }
        },
        {
            "name": "PASO 8 - Listar Entrenadores",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Entrenadores listados', function () {",
                            "    pm.response.to.have.status(200);",
                            "    var json = pm.response.json();",
                            "    pm.expect(json).to.be.an('array');",
                            "    console.log('‚úÖ Total entrenadores: ' + json.length);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/admin/entrenadores",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "entrenadores"
                    ]
                }
            }
        },
        {
            "name": "PASO 9 - Crear Clase 1 (Yoga Matutino)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Clase 1 creada', function () {",
                            "    pm.response.to.have.status(201);",
                            "    var json = pm.response.json();",
                            "    pm.collectionVariables.set('clase1Id', json.idClase);",
                            "    console.log('‚úÖ Clase 1 ID: ' + json.idClase);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"nombre\": \"Yoga Matutino\",\n    \"descripcion\": \"Clase de yoga para principiantes e intermedios con meditaci√≥n.\",\n    \"horario\": \"2026-03-01T08:00:00\",\n    \"cupo\": 20,\n    \"duracionMinutos\": 60,\n    \"activo\": true,\n    \"idEntrenador\": {{entrenador1Id}}\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/admin/clases",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "clases"
                    ]
                }
            }
        },
        {
            "name": "PASO 10 - Crear Clase 2 (CrossFit Intenso)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Clase 2 creada', function () {",
                            "    pm.response.to.have.status(201);",
                            "    var json = pm.response.json();",
                            "    pm.collectionVariables.set('clase2Id', json.idClase);",
                            "    console.log('‚úÖ Clase 2 ID: ' + json.idClase);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"nombre\": \"CrossFit Intenso\",\n    \"descripcion\": \"Entrenamiento funcional de alta intensidad.\",\n    \"horario\": \"2026-03-01T10:00:00\",\n    \"cupo\": 15,\n    \"duracionMinutos\": 45,\n    \"activo\": true,\n    \"idEntrenador\": {{entrenador2Id}}\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/admin/clases",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "clases"
                    ]
                }
            }
        },
        {
            "name": "PASO 11 - Crear Clase 3 (Spinning Nocturno)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Clase 3 creada', function () {",
                            "    pm.response.to.have.status(201);",
                            "    var json = pm.response.json();",
                            "    pm.collectionVariables.set('clase3Id', json.idClase);",
                            "    console.log('‚úÖ Clase 3 ID: ' + json.idClase);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"nombre\": \"Spinning Nocturno\",\n    \"descripcion\": \"Sesi√≥n energ√©tica de spinning con m√∫sica motivacional.\",\n    \"horario\": \"2026-03-01T19:00:00\",\n    \"cupo\": 25,\n    \"duracionMinutos\": 50,\n    \"activo\": true,\n    \"idEntrenador\": {{entrenador3Id}}\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/admin/clases",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "clases"
                    ]
                }
            }
        },
        {
            "name": "PASO 12 - Crear Clase 4 (Pilates)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Clase 4 creada', function () {",
                            "    pm.response.to.have.status(201);",
                            "    var json = pm.response.json();",
                            "    pm.collectionVariables.set('clase4Id', json.idClase);",
                            "    console.log('‚úÖ Clase 4 ID: ' + json.idClase);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"nombre\": \"Pilates Terap√©utico\",\n    \"descripcion\": \"Clase enfocada en rehabilitaci√≥n y fortalecimiento del core.\",\n    \"horario\": \"2026-03-02T09:00:00\",\n    \"cupo\": 12,\n    \"duracionMinutos\": 55,\n    \"activo\": true,\n    \"idEntrenador\": {{entrenador1Id}}\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/admin/clases",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "clases"
                    ]
                }
            }
        },
        {
            "name": "PASO 13 - Crear Clase 5 (Funcional Express)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Clase 5 creada', function () {",
                            "    pm.response.to.have.status(201);",
                            "    var json = pm.response.json();",
                            "    pm.collectionVariables.set('clase5Id', json.idClase);",
                            "    console.log('‚úÖ Clase 5 ID: ' + json.idClase);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"nombre\": \"Funcional Express\",\n    \"descripcion\": \"Entrenamiento funcional corto e intenso para hora de almuerzo.\",\n    \"horario\": \"2026-03-02T12:30:00\",\n    \"cupo\": 18,\n    \"duracionMinutos\": 30,\n    \"activo\": true,\n    \"idEntrenador\": {{entrenador2Id}}\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/admin/clases",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "clases"
                    ]
                }
            }
        },
        {
            "name": "PASO 14 - Listar Todas las Clases (Admin)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Clases listadas', function () {",
                            "    pm.response.to.have.status(200);",
                            "    var json = pm.response.json();",
                            "    pm.expect(json).to.be.an('array');",
                            "    console.log('‚úÖ Total clases: ' + json.length);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/admin/clases",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "clases"
                    ]
                }
            }
        },
        {
            "name": "PASO 15 - Re-Login Admin ‚ö° RENUEVA TOKEN",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Re-login admin exitoso', function () {",
                            "    pm.response.to.have.status(200);",
                            "    var json = pm.response.json();",
                            "    var data = json.data || json;",
                            "    pm.collectionVariables.set('adminToken', data.accessToken);",
                            "    console.log('üîÑ Admin token renovado');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"correo\": \"admin@gimnasio.com\",\n    \"contrasena\": \"admin123\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/auth/login",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "auth",
                        "login"
                    ]
                }
            }
        },
        {
            "name": "PASO 16 - Crear Usuario desde Admin (Ana)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Usuario Ana creado', function () {",
                            "    var code = pm.response.code;",
                            "    pm.expect(code === 201 || code === 200 || code === 400).to.be.true;",
                            "    console.log('‚úÖ Usuario Ana procesado');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"nombre\": \"Ana L√≥pez\",\n    \"correo\": \"ana@gmail.com\",\n    \"contrasena\": \"ana12345\",\n    \"rol\": \"USER\",\n    \"activo\": true\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/admin/usuarios",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "usuarios"
                    ]
                }
            }
        },
        {
            "name": "PASO 17 - Listar Todos los Usuarios",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Usuarios listados', function () {",
                            "    pm.response.to.have.status(200);",
                            "    var json = pm.response.json();",
                            "    pm.expect(json).to.be.an('array');",
                            "    console.log('‚úÖ Total usuarios: ' + json.length);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/admin/usuarios",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "usuarios"
                    ]
                }
            }
        },
        {
            "name": "PASO 18 - Buscar Usuarios por Rol USER",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Usuarios USER encontrados', function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/admin/usuarios/rol/USER",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "usuarios",
                        "rol",
                        "USER"
                    ]
                }
            }
        },
        {
            "name": "PASO 19 - Re-Login Usuario ‚ö° RENUEVA TOKEN",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Re-login usuario exitoso', function () {",
                            "    pm.response.to.have.status(200);",
                            "    var json = pm.response.json();",
                            "    var data = json.data || json;",
                            "    pm.collectionVariables.set('userToken', data.accessToken);",
                            "    pm.collectionVariables.set('userId', data.idUsuario);",
                            "    console.log('üîÑ User token renovado. ID: ' + data.idUsuario);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"correo\": \"carlos@gmail.com\",\n    \"contrasena\": \"123456\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/auth/login",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "auth",
                        "login"
                    ]
                }
            }
        },
        {
            "name": "PASO 20 - Ver Clases Disponibles (Usuario)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Clases disponibles obtenidas', function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{userToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/clases",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "clases"
                    ]
                }
            }
        },
        {
            "name": "PASO 21 - Ver Clases Activas (Usuario)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Clases activas obtenidas', function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{userToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/clases/activas",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "clases",
                        "activas"
                    ]
                }
            }
        },
        {
            "name": "PASO 22 - Buscar Clase por Nombre",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Busqueda exitosa', function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{userToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/clases/buscar?nombre=Yoga",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "clases",
                        "buscar"
                    ],
                    "query": [
                        {
                            "key": "nombre",
                            "value": "Yoga"
                        }
                    ]
                }
            }
        },
        {
            "name": "PASO 23 - Crear Reserva 1 (Yoga)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Reserva 1 creada', function () {",
                            "    pm.response.to.have.status(201);",
                            "    var json = pm.response.json();",
                            "    var data = json.data || json;",
                            "    if (data.idReserva) pm.collectionVariables.set('reserva1Id', data.idReserva);",
                            "    console.log('‚úÖ Reserva 1 creada');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{userToken}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"idUsuario\": {{userId}},\n    \"idClase\": {{clase1Id}}\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/reservas",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "reservas"
                    ]
                }
            }
        },
        {
            "name": "PASO 24 - Crear Reserva 2 (CrossFit)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Reserva 2 creada', function () {",
                            "    pm.response.to.have.status(201);",
                            "    var json = pm.response.json();",
                            "    var data = json.data || json;",
                            "    if (data.idReserva) pm.collectionVariables.set('reserva2Id', data.idReserva);",
                            "    console.log('‚úÖ Reserva 2 creada');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{userToken}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"idUsuario\": {{userId}},\n    \"idClase\": {{clase2Id}}\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/reservas",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "reservas"
                    ]
                }
            }
        },
        {
            "name": "PASO 25 - Crear Reserva 3 (Spinning)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Reserva 3 creada', function () {",
                            "    pm.response.to.have.status(201);",
                            "    var json = pm.response.json();",
                            "    var data = json.data || json;",
                            "    if (data.idReserva) pm.collectionVariables.set('reserva3Id', data.idReserva);",
                            "    console.log('‚úÖ Reserva 3 creada');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{userToken}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"idUsuario\": {{userId}},\n    \"idClase\": {{clase3Id}}\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/reservas",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "reservas"
                    ]
                }
            }
        },
        {
            "name": "PASO 26 - Ver Mis Reservas",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Reservas del usuario obtenidas', function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{userToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/reservas/usuario/{{userId}}",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "reservas",
                        "usuario",
                        "{{userId}}"
                    ]
                }
            }
        },
        {
            "name": "PASO 27 - Ver Reservas Confirmadas",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Reservas confirmadas obtenidas', function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{userToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/reservas/usuario/{{userId}}/confirmadas",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "reservas",
                        "usuario",
                        "{{userId}}",
                        "confirmadas"
                    ]
                }
            }
        },
        {
            "name": "PASO 28 - Ver Disponibilidad de Clases",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Disponibilidad obtenida', function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{userToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/disponibilidad/clases",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "disponibilidad",
                        "clases"
                    ]
                }
            }
        },
        {
            "name": "PASO 29 - Estad√≠sticas Generales",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Estad√≠sticas obtenidas', function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{userToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/estadisticas",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "estadisticas"
                    ]
                }
            }
        },
        {
            "name": "PASO 30 - Re-Login Admin ‚ö° RENUEVA TOKEN",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Re-login admin exitoso', function () {",
                            "    pm.response.to.have.status(200);",
                            "    var json = pm.response.json();",
                            "    var data = json.data || json;",
                            "    pm.collectionVariables.set('adminToken', data.accessToken);",
                            "    console.log('üîÑ Admin token renovado para reportes');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"correo\": \"admin@gimnasio.com\",\n    \"contrasena\": \"admin123\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/auth/login",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "auth",
                        "login"
                    ]
                }
            }
        },
        {
            "name": "PASO 31 - Reporte General (Admin)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Reporte general obtenido', function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/admin/reportes/general",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "reportes",
                        "general"
                    ]
                }
            }
        },
        {
            "name": "PASO 32 - Reporte Semanal (Admin)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Reporte semanal obtenido', function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/admin/reportes/semanal",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "reportes",
                        "semanal"
                    ]
                }
            }
        },
        {
            "name": "PASO 33 - Listar Reservas (Admin)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Reservas admin obtenidas', function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/admin/reservas",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "reservas"
                    ]
                }
            }
        },
        {
            "name": "PASO 34 - Reservas por Estado CONFIRMADA",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Reservas confirmadas obtenidas', function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/admin/reservas/estado/CONFIRMADA",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "reservas",
                        "estado",
                        "CONFIRMADA"
                    ]
                }
            }
        },
        {
            "name": "PASO 35 - Estad√≠sticas Entrenadores (Admin)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Estad√≠sticas entrenadores obtenidas', function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{adminToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/admin/reportes/estadisticas/entrenadores",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "admin",
                        "reportes",
                        "estadisticas",
                        "entrenadores"
                    ]
                }
            }
        },
        {
            "name": "PASO 36 - Simular Evento SSE (CUPO_DISPONIBLE)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Evento simulado', function () {",
                            "    pm.response.to.have.status(200);",
                            "    console.log('‚úÖ Evento SSE simulado');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"claseId\": \"1\",\n    \"tipo\": \"CUPO_DISPONIBLE\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/recomendaciones/simular",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "recomendaciones",
                        "simular"
                    ]
                }
            }
        },
        {
            "name": "PASO 37 - Simular Evento SSE (RESERVA_CREADA)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Evento simulado', function () {",
                            "    pm.response.to.have.status(200);",
                            "    console.log('‚úÖ Evento SSE simulado');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"claseId\": \"2\",\n    \"tipo\": \"RESERVA_CREADA\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/recomendaciones/simular",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "recomendaciones",
                        "simular"
                    ]
                }
            }
        },
        {
            "name": "PASO 38 - Re-Login Usuario ‚ö° FINAL",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Login final usuario', function () {",
                            "    pm.response.to.have.status(200);",
                            "    var json = pm.response.json();",
                            "    var data = json.data || json;",
                            "    pm.collectionVariables.set('userToken', data.accessToken);",
                            "    console.log('üîÑ Token final del usuario renovado');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"correo\": \"carlos@gmail.com\",\n    \"contrasena\": \"123456\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/auth/login",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "auth",
                        "login"
                    ]
                }
            }
        },
        {
            "name": "PASO 39 - Cancelar Reserva 1",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Reserva cancelada', function () {",
                            "    pm.response.to.have.status(200);",
                            "    console.log('‚úÖ Reserva cancelada exitosamente');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{userToken}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"idUsuario\": {{userId}}\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/reservas/{{reserva1Id}}/cancelar",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "reservas",
                        "{{reserva1Id}}",
                        "cancelar"
                    ]
                }
            }
        },
        {
            "name": "PASO 40 - Ver Historial de Reservas",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Historial obtenido', function () {",
                            "    pm.response.to.have.status(200);",
                            "    console.log('‚úÖ Historial completo del usuario');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{userToken}}"
                    }
                ],
                "url": {
                    "raw": "{{baseUrl}}/reservas/usuario/{{userId}}/historial",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "reservas",
                        "usuario",
                        "{{userId}}",
                        "historial"
                    ]
                }
            }
        }
    ]
}
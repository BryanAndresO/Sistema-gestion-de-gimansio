# Render manifest to create a Docker web service for the backend
# Adjust `name`, `region`, and `plan` as needed in Render UI
services:
  - type: web
    name: gimnasio-backend
    env: docker
    dockerfilePath: ./gimnasioreserva-spring/Dockerfile
    branch: master
    region: oregon
    plan: free
    # Build and start commands are handled by Dockerfile; leave empty
    buildCommand: ""
    startCommand: ""
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: render
      - key: JWT_SECRET
        value: "<REPLACE_WITH_SECRET>"
      # Optionally expose the H2 console in Render (not recommended for production)
      - key: SPRING_H2_CONSOLE_ENABLED
        value: "true"
      # H2 in-memory DB settings for the `render` profile (testing only)
      - key: SPRING_DATASOURCE_URL
        value: jdbc:h2:mem:renderdb;DB_CLOSE_DELAY=-1;MODE=MySQL
      - key: SPRING_DATASOURCE_DRIVER_CLASS_NAME
        value: org.h2.Driver
      - key: SPRING_DATASOURCE_USERNAME
        value: sa
      - key: SPRING_DATASOURCE_PASSWORD
        value: ""
      - key: SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT
        value: org.hibernate.dialect.H2Dialect
      - key: SPRING_JPA_HIBERNATE_DDL_AUTO
        value: update
